import request from '../utils/request';
import { createModel } from "@rematch/core"
import { RootModel } from "./index"
export default createModel<RootModel>()({
  state: {
    test: 'global state test',
    name: 'kkt ssr',
    token: null,
    userinfo: null,
  },
  reducers: {
    verify: (state, payload) => ({ ...state, ...payload }),
    updateState: (state, payload) => ({ ...state, ...payload }),
  },
  effects: () => ({
    // async verify({ token }, { global }) {
    //   const verify = await request('/api/user/verify', { body: { token } });
    //   const state = { ...global, test: 'test:global:111----------->' };
    //   state.token = verify ? token : null;
    //   state.userinfo = verify;
    //   await this.updateState({ ...state });
    // },
  }),
});
